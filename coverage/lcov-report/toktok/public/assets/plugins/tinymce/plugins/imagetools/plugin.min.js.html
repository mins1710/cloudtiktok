
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for toktok/public/assets/plugins/tinymce/plugins/imagetools/plugin.min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../../index.html">All files</a> / <a href="index.html">toktok/public/assets/plugins/tinymce/plugins/imagetools</a> plugin.min.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/574</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/281</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/315</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >!<span class="fstat-no" title="function not covered" >fu</span>nction(){var a=<span class="cstat-no" title="statement not covered" >{},</span>b=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >for(var c=<span class="cstat-no" title="statement not covered" >a[b],</span>e=<span class="cstat-no" title="statement not covered" >c.deps,</span>f=<span class="cstat-no" title="statement not covered" >c.defn,</span>g=<span class="cstat-no" title="statement not covered" >e.length,</span>h=<span class="cstat-no" title="statement not covered" >new Array(g),</span>i=<span class="cstat-no" title="statement not covered" >0;</span>g&gt;i;++i)<span class="cstat-no" title="statement not covered" >h[i]=d(e[i]);v</span></span>ar j=<span class="cstat-no" title="statement not covered" >f.apply(null,h);<span class="cstat-no" title="statement not covered" ></span>if(void 0===j)<span class="cstat-no" title="statement not covered" >throw"module ["+b+"] returned undefined";<span class="cstat-no" title="statement not covered" >c</span></span>.instance=j}</span>,</span>c=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c,d){<span class="cstat-no" title="statement not covered" >if("string"!=typeof b)<span class="cstat-no" title="statement not covered" >throw"module id must be a string";<span class="cstat-no" title="statement not covered" >i</span></span>f(void 0===c)<span class="cstat-no" title="statement not covered" >throw"no dependencies for "+b;<span class="cstat-no" title="statement not covered" >i</span></span>f(void 0===d)<span class="cstat-no" title="statement not covered" >throw"no definition function for "+b;<span class="cstat-no" title="statement not covered" >a</span></span>[b]={deps:c,defn:d,instance:void 0}}</span>,</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(c){var d=<span class="cstat-no" title="statement not covered" >a[c];<span class="cstat-no" title="statement not covered" ></span>if(void 0===d)<span class="cstat-no" title="statement not covered" >throw"module ["+c+"] was undefined";<span class="cstat-no" title="statement not covered" >r</span></span>eturn void 0===d.instance&amp;&amp;b(c),d.instance}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >for(var c=<span class="cstat-no" title="statement not covered" >a.length,</span>e=<span class="cstat-no" title="statement not covered" >new Array(c),</span>f=<span class="cstat-no" title="statement not covered" >0;</span>c&gt;f;++f)<span class="cstat-no" title="statement not covered" >e.push(d(a[f]));<span class="cstat-no" title="statement not covered" >b</span></span>.apply(null,b)}</span>,</span>f=<span class="cstat-no" title="statement not covered" >{};<span class="cstat-no" title="statement not covered" ></span>f.bolt={module:{api:{define:c,require:e,demand:d}}};v</span>ar g=<span class="cstat-no" title="statement not covered" >c,</span>h=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >g(a,[],<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return b}</span>)}</span>;<span class="cstat-no" title="statement not covered" ></span>h("1",tinymce.PluginManager),h("2",tinymce.Env),h("3",tinymce.util.Promise),h("4",tinymce.util.URI),h("5",tinymce.util.Tools),h("6",tinymce.util.Delay),g("m",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a,b){<span class="cstat-no" title="statement not covered" >return d(document.createElement("canvas"),a,b)}</span>function <span class="fstat-no" title="function not covered" >b(</span>a){<span class="cstat-no" title="statement not covered" >return a.getContext("2d")}</span>function <span class="fstat-no" title="function not covered" >c(</span>a){var b=<span class="cstat-no" title="statement not covered" >null;<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >b=a.getContext("webgl")||a.getContext("experimental-webgl")}</span>catch(c){}<span class="cstat-no" title="statement not covered" >r</span>eturn b||(b=null),b}</span>function <span class="fstat-no" title="function not covered" >d(</span>a,b,c){<span class="cstat-no" title="statement not covered" >return a.width=b,a.height=c,a}<span class="cstat-no" title="statement not covered" ></span>return{create:a,resize:d,get2dContext:b,get3dContext:c}}</span>),g("n",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a){<span class="cstat-no" title="statement not covered" >return a.naturalWidth||a.width}</span>function <span class="fstat-no" title="function not covered" >b(</span>a){<span class="cstat-no" title="statement not covered" >return a.naturalHeight||a.height}<span class="cstat-no" title="statement not covered" ></span>return{getWidth:a,getHeight:b}}</span>),g("o",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a,b){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >a.apply(b,arguments)}</span>}</span>function <span class="fstat-no" title="function not covered" >b(</span>b){<span class="cstat-no" title="statement not covered" >if("object"!=typeof this)<span class="cstat-no" title="statement not covered" >throw new TypeError("Promises must be constructed via new");<span class="cstat-no" title="statement not covered" >i</span></span>f("function"!=typeof b)<span class="cstat-no" title="statement not covered" >throw new TypeError("not a function");<span class="cstat-no" title="statement not covered" >t</span></span>his._state=null,this._value=null,this._deferreds=[],h(b,a(d,this),a(e,this))}</span>function <span class="fstat-no" title="function not covered" >c(</span>a){var b=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>return null===this._state?void this._deferreds.push(a):void i(<span class="fstat-no" title="function not covered" >fu</span>nction(){var c=<span class="cstat-no" title="statement not covered" >b._state?a.onFulfilled:a.onRejected;<span class="cstat-no" title="statement not covered" ></span>if(null===c)<span class="cstat-no" title="statement not covered" >return void(b._state?a.resolve:a.reject)(b._value);v</span></span>ar d;<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >d=c(b._value)}</span>catch(e){<span class="cstat-no" title="statement not covered" >return void a.reject(e)}<span class="cstat-no" title="statement not covered" ></span>a</span>.resolve(d)}</span>)}</span>function <span class="fstat-no" title="function not covered" >d(</span>b){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(b===this)<span class="cstat-no" title="statement not covered" >throw new TypeError("A promise cannot be resolved with itself.");<span class="cstat-no" title="statement not covered" >i</span></span>f(b&amp;&amp;("object"==typeof b||"function"==typeof b)){var c=<span class="cstat-no" title="statement not covered" >b.then;<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof c)<span class="cstat-no" title="statement not covered" >return void h(a(c,b),a(d,this),a(e,this))}<span class="cstat-no" title="statement not covered" ></span></span>t</span>his._state=!0,this._value=b,f.call(this)}</span>catch(g){<span class="cstat-no" title="statement not covered" >e.call(this,g)}</span>}</span>function <span class="fstat-no" title="function not covered" >e(</span>a){<span class="cstat-no" title="statement not covered" >this._state=!1,this._value=a,f.call(this)}</span>function <span class="fstat-no" title="function not covered" >f(</span>){<span class="cstat-no" title="statement not covered" >for(var a=<span class="cstat-no" title="statement not covered" >0,</span>b=<span class="cstat-no" title="statement not covered" >this._deferreds.length;</span>b&gt;a;a++)<span class="cstat-no" title="statement not covered" >c.call(this,this._deferreds[a]);<span class="cstat-no" title="statement not covered" >t</span></span>his._deferreds=null}</span>function <span class="fstat-no" title="function not covered" >g(</span>a,b,c,d){<span class="cstat-no" title="statement not covered" >this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}</span>function <span class="fstat-no" title="function not covered" >h(</span>a,b,c){var d=<span class="cstat-no" title="statement not covered" >!1;<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >d||(d=!0,b(a))}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >d||(d=!0,c(a))}</span>)}</span>catch(e){<span class="cstat-no" title="statement not covered" >if(d)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>=!0,c(e)}</span>}<span class="cstat-no" title="statement not covered" ></span>if(window.Promise)<span class="cstat-no" title="statement not covered" >return window.Promise;v</span></span>ar i=<span class="cstat-no" title="statement not covered" >b.immediateFn||"function"==typeof setImmediate&amp;&amp;setImmediate||<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >setTimeout(a,1)}</span>,</span>j=<span class="cstat-no" title="statement not covered" >Array.isArray||<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return"[object Array]"===Object.prototype.toString.call(a)}</span>;<span class="cstat-no" title="statement not covered" ></span>return b.prototype["catch"]=<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return this.then(null,a)}</span>,b.prototype.then=<span class="fstat-no" title="function not covered" >fu</span>nction(a,d){var e=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>return new b(<span class="fstat-no" title="function not covered" >fu</span>nction(b,f){<span class="cstat-no" title="statement not covered" >c.call(e,new g(a,d,b,f))}</span>)}</span>,b.all=<span class="fstat-no" title="function not covered" >fu</span>nction(){var a=<span class="cstat-no" title="statement not covered" >Array.prototype.slice.call(1===arguments.length&amp;&amp;j(arguments[0])?arguments[0]:arguments);<span class="cstat-no" title="statement not covered" ></span>return new b(<span class="fstat-no" title="function not covered" >fu</span>nction(b,c){function <span class="fstat-no" title="function not covered" >d(</span>f,g){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(g&amp;&amp;("object"==typeof g||"function"==typeof g)){var h=<span class="cstat-no" title="statement not covered" >g.then;<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof h)<span class="cstat-no" title="statement not covered" >return void h.call(g,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >d(f,a)}</span>,c)}<span class="cstat-no" title="statement not covered" ></span></span>a</span>[f]=g,0===--e&amp;&amp;b(a)}</span>catch(i){<span class="cstat-no" title="statement not covered" >c(i)}</span>}<span class="cstat-no" title="statement not covered" ></span>if(0===a.length)<span class="cstat-no" title="statement not covered" >return b([]);<span class="cstat-no" title="statement not covered" >f</span></span>or(var e=<span class="cstat-no" title="statement not covered" >a.length,</span>f=<span class="cstat-no" title="statement not covered" >0;</span>f&lt;a.length;f++)<span class="cstat-no" title="statement not covered" >d(f,a[f])}</span></span>)}</span>,b.resolve=<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return a&amp;&amp;"object"==typeof a&amp;&amp;a.constructor===b?a:new b(<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >b(a)}</span>)}</span>,b.reject=<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return new b(<span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >c(a)}</span>)}</span>,b.race=<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return new b(<span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >for(var d=<span class="cstat-no" title="statement not covered" >0,</span>e=<span class="cstat-no" title="statement not covered" >a.length;</span>e&gt;d;d++)<span class="cstat-no" title="statement not covered" >a[d].then(b,c)}</span></span>)}</span>,b}</span>),g("p",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a){var b=<span class="cstat-no" title="statement not covered" >document.createElement("a");<span class="cstat-no" title="statement not covered" ></span>return b.href=a,b.pathname}</span>function <span class="fstat-no" title="function not covered" >b(</span>b){var c=<span class="cstat-no" title="statement not covered" >a(b).split("."),</span>d=<span class="cstat-no" title="statement not covered" >c[c.length-1],</span>e=<span class="cstat-no" title="statement not covered" >{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"};<span class="cstat-no" title="statement not covered" ></span>return d&amp;&amp;(d=d.toLowerCase()),e[d]}<span class="cstat-no" title="statement not covered" ></span>return{guessMimeType:b}}</span>),g("e",["o","m","p","n"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d){function <span class="fstat-no" title="function not covered" >e(</span>b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){function <span class="fstat-no" title="function not covered" >c(</span>){<span class="cstat-no" title="statement not covered" >b.removeEventListener("load",c),a(b)}<span class="cstat-no" title="statement not covered" ></span>b.complete?a(b):b.addEventListener("load",c)}</span>)}</span>function <span class="fstat-no" title="function not covered" >f(</span>a){<span class="cstat-no" title="statement not covered" >return e(a).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c,e;<span class="cstat-no" title="statement not covered" >return e=b.create(d.getWidth(a),d.getHeight(a)),c=b.get2dContext(e),c.drawImage(a,0,0),e}</span>)}</span>function <span class="fstat-no" title="function not covered" >g(</span>a){<span class="cstat-no" title="statement not covered" >return e(a).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >a.src;<span class="cstat-no" title="statement not covered" ></span>return 0===b.indexOf("blob:")?i(b):0===b.indexOf("data:")?j(b):f(a).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return j(a.toDataURL(c.guessMimeType(b)))}</span>)}</span>)}</span>function <span class="fstat-no" title="function not covered" >h(</span>b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){function <span class="fstat-no" title="function not covered" >c(</span>){<span class="cstat-no" title="statement not covered" >d.removeEventListener("load",c),a(d)}</span>var d=<span class="cstat-no" title="statement not covered" >new Image;<span class="cstat-no" title="statement not covered" ></span>d.addEventListener("load",c),d.src=URL.createObjectURL(b),d.complete&amp;&amp;c()}</span>)}</span>function <span class="fstat-no" title="function not covered" >i(</span>b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c=<span class="cstat-no" title="statement not covered" >new XMLHttpRequest;<span class="cstat-no" title="statement not covered" ></span>c.open("GET",b,!0),c.responseType="blob",c.onload=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >200==this.status&amp;&amp;a(this.response)}</span>,c.send()}</span>)}</span>function <span class="fstat-no" title="function not covered" >j(</span>b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c,d,e,f,g,h;<span class="cstat-no" title="statement not covered" >if(b=b.split(","),f=/data:([^;]+)/.exec(b[0]),f&amp;&amp;(g=f[1]),c=atob(b[1]),window.WebKitBlobBuilder){<span class="cstat-no" title="statement not covered" >for(h=new WebKitBlobBuilder,d=new ArrayBuffer(c.length),e=0;e&lt;d.length;e++)<span class="cstat-no" title="statement not covered" >d[e]=c.charCodeAt(e);<span class="cstat-no" title="statement not covered" >r</span></span>eturn h.append(d),void a(h.getBlob(g))}<span class="cstat-no" title="statement not covered" ></span>f</span>or(d=new Uint8Array(c.length),e=0;e&lt;d.length;e++)<span class="cstat-no" title="statement not covered" >d[e]=c.charCodeAt(e);<span class="cstat-no" title="statement not covered" >a</span></span>(new Blob([d],{type:g}))}</span>)}</span>function <span class="fstat-no" title="function not covered" >k(</span>a){<span class="cstat-no" title="statement not covered" >return 0===a.indexOf("blob:")?i(a):0===a.indexOf("data:")?j(a):null}</span>function <span class="fstat-no" title="function not covered" >l(</span>a,b){<span class="cstat-no" title="statement not covered" >return j(a.toDataURL(b))}</span>function <span class="fstat-no" title="function not covered" >m(</span>b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c=<span class="cstat-no" title="statement not covered" >new FileReader;<span class="cstat-no" title="statement not covered" ></span>c.onloadend=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >a(c.result)}</span>,c.readAsDataURL(b)}</span>)}</span>function <span class="fstat-no" title="function not covered" >n(</span>a){<span class="cstat-no" title="statement not covered" >return m(a).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return a.split(",")[1]}</span>)}</span>function <span class="fstat-no" title="function not covered" >o(</span>a){<span class="cstat-no" title="statement not covered" >URL.revokeObjectURL(a.src)}<span class="cstat-no" title="statement not covered" ></span>return{blobToImage:h,imageToBlob:g,blobToDataUri:m,blobToBase64:n,imageToCanvas:f,canvasToBlob:l,revokeImageUrl:o,uriToBlob:k}}</span>),g("q",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a,b,c){<span class="cstat-no" title="statement not covered" >return a=parseFloat(a),a&gt;c?a=c:b&gt;a&amp;&amp;(a=b),a}</span>function <span class="fstat-no" title="function not covered" >b(</span>){<span class="cstat-no" title="statement not covered" >return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}</span>function <span class="fstat-no" title="function not covered" >c(</span>a,b){var c,d,e,f,g=<span class="cstat-no" title="statement not covered" >[],</span>h=<span class="cstat-no" title="statement not covered" >new Array(10);<span class="cstat-no" title="statement not covered" ></span>for(c=0;5&gt;c;c++){<span class="cstat-no" title="statement not covered" >for(d=0;5&gt;d;d++)<span class="cstat-no" title="statement not covered" >g[d]=b[d+5*c];<span class="cstat-no" title="statement not covered" >f</span></span>or(d=0;5&gt;d;d++){<span class="cstat-no" title="statement not covered" >for(f=0,e=0;5&gt;e;e++)<span class="cstat-no" title="statement not covered" >f+=a[d+5*e]*g[e];<span class="cstat-no" title="statement not covered" >h</span></span>[d+5*c]=f}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn h}</span>function <span class="fstat-no" title="function not covered" >d(</span>b,c){<span class="cstat-no" title="statement not covered" >return c=a(c,0,1),b.map(<span class="fstat-no" title="function not covered" >fu</span>nction(b,d){<span class="cstat-no" title="statement not covered" >return d%6===0?b=1-(1-b)*c:b*=c,a(b,0,1)}</span>)}</span>function <span class="fstat-no" title="function not covered" >e(</span>b,d){var e;<span class="cstat-no" title="statement not covered" >return d=a(d,-1,1),d*=100,0&gt;d?e=127+d/100*127:(e=d%1,e=0===e?l[d]:l[Math.floor(d)]*(1-e)+l[Math.floor(d)+1]*e,e=127*e+127),c(b,[e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])}</span>function <span class="fstat-no" title="function not covered" >f(</span>b,d){var e,f,g,h;<span class="cstat-no" title="statement not covered" >return d=a(d,-1,1),e=1+(d&gt;0?3*d:d),f=.3086,g=.6094,h=.082,c(b,[f*(1-e)+e,g*(1-e),h*(1-e),0,0,f*(1-e),g*(1-e)+e,h*(1-e),0,0,f*(1-e),g*(1-e),h*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1])}</span>function <span class="fstat-no" title="function not covered" >g(</span>b,d){var e,f,g,h,i;<span class="cstat-no" title="statement not covered" >return d=a(d,-180,180)/180*Math.PI,e=Math.cos(d),f=Math.sin(d),g=.213,h=.715,i=.072,c(b,[g+e*(1-g)+f*-g,h+e*-h+f*-h,i+e*-i+f*(1-i),0,0,g+e*-g+.143*f,h+e*(1-h)+.14*f,i+e*-i+f*-.283,0,0,g+e*-g+f*-(1-g),h+e*-h+f*h,i+e*(1-i)+f*i,0,0,0,0,0,1,0,0,0,0,0,1])}</span>function <span class="fstat-no" title="function not covered" >h(</span>b,d){<span class="cstat-no" title="statement not covered" >return d=a(255*d,-255,255),c(b,[1,0,0,0,d,0,1,0,0,d,0,0,1,0,d,0,0,0,1,0,0,0,0,0,1])}</span>function <span class="fstat-no" title="function not covered" >i(</span>b,d,e,f){<span class="cstat-no" title="statement not covered" >return d=a(d,0,2),e=a(e,0,2),f=a(f,0,2),c(b,[d,0,0,0,0,0,e,0,0,0,0,0,f,0,0,0,0,0,1,0,0,0,0,0,1])}</span>function <span class="fstat-no" title="function not covered" >j(</span>b,e){<span class="cstat-no" title="statement not covered" >return e=a(e,0,1),c(b,d([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],e))}</span>function <span class="fstat-no" title="function not covered" >k(</span>b,e){<span class="cstat-no" title="statement not covered" >return e=a(e,0,1),c(b,d([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],e))}</span>var l=<span class="cstat-no" title="statement not covered" >[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];<span class="cstat-no" title="statement not covered" ></span>return{identity:b,adjust:d,multiply:c,adjustContrast:e,adjustBrightness:h,adjustSaturation:f,adjustHue:g,adjustColors:i,adjustSepia:j,adjustGrayscale:k}}</span>),g("c",["m","n","e","q"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d){function <span class="fstat-no" title="function not covered" >e(</span>d,e){<span class="cstat-no" title="statement not covered" >return c.blobToImage(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(d){function <span class="fstat-no" title="function not covered" >f(</span>a,b){var c,d,e,f,g,h=<span class="cstat-no" title="statement not covered" >a.data,</span>i=<span class="cstat-no" title="statement not covered" >b[0],</span>j=<span class="cstat-no" title="statement not covered" >b[1],</span>k=<span class="cstat-no" title="statement not covered" >b[2],</span>l=<span class="cstat-no" title="statement not covered" >b[3],</span>m=<span class="cstat-no" title="statement not covered" >b[4],</span>n=<span class="cstat-no" title="statement not covered" >b[5],</span>o=<span class="cstat-no" title="statement not covered" >b[6],</span>p=<span class="cstat-no" title="statement not covered" >b[7],</span>q=<span class="cstat-no" title="statement not covered" >b[8],</span>r=<span class="cstat-no" title="statement not covered" >b[9],</span>s=<span class="cstat-no" title="statement not covered" >b[10],</span>t=<span class="cstat-no" title="statement not covered" >b[11],</span>u=<span class="cstat-no" title="statement not covered" >b[12],</span>v=<span class="cstat-no" title="statement not covered" >b[13],</span>w=<span class="cstat-no" title="statement not covered" >b[14],</span>x=<span class="cstat-no" title="statement not covered" >b[15],</span>y=<span class="cstat-no" title="statement not covered" >b[16],</span>z=<span class="cstat-no" title="statement not covered" >b[17],</span>A=<span class="cstat-no" title="statement not covered" >b[18],</span>B=<span class="cstat-no" title="statement not covered" >b[19];<span class="cstat-no" title="statement not covered" ></span>for(g=0;g&lt;h.length;g+=4)<span class="cstat-no" title="statement not covered" >c=h[g],d=h[g+1],e=h[g+2],f=h[g+3],h[g]=c*i+d*j+e*k+f*l+m,h[g+1]=c*n+d*o+e*p+f*q+r,h[g+2]=c*s+d*t+e*u+f*v+w,h[g+3]=c*x+d*y+e*z+f*A+B;<span class="cstat-no" title="statement not covered" >r</span></span>eturn a}</span>var g,h=<span class="cstat-no" title="statement not covered" >a.create(b.getWidth(d),b.getHeight(d)),</span>i=<span class="cstat-no" title="statement not covered" >a.get2dContext(h);<span class="cstat-no" title="statement not covered" ></span>return i.drawImage(d,0,0),k(d),g=f(i.getImageData(0,0,h.width,h.height),e),i.putImageData(g,0,0),c.canvasToBlob(h)}</span>)}</span>function <span class="fstat-no" title="function not covered" >f(</span>d,e){<span class="cstat-no" title="statement not covered" >return c.blobToImage(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(d){function <span class="fstat-no" title="function not covered" >f(</span>a,b,c){function <span class="fstat-no" title="function not covered" >d(</span>a,b,c){<span class="cstat-no" title="statement not covered" >return a&gt;c?a=c:b&gt;a&amp;&amp;(a=b),a}</span>var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;<span class="cstat-no" title="statement not covered" >for(g=Math.round(Math.sqrt(c.length)),h=Math.floor(g/2),e=a.data,f=b.data,t=a.width,u=a.height,j=0;u&gt;j;j++)<span class="cstat-no" title="statement not covered" >for(i=0;t&gt;i;i++){<span class="cstat-no" title="statement not covered" >for(k=l=m=0,o=0;g&gt;o;o++)<span class="cstat-no" title="statement not covered" >for(n=0;g&gt;n;n++)<span class="cstat-no" title="statement not covered" >p=d(i+n-h,0,t-1),q=d(j+o-h,0,u-1),r=4*(q*t+p),s=c[o*g+n],k+=e[r]*s,l+=e[r+1]*s,m+=e[r+2]*s;<span class="cstat-no" title="statement not covered" >r</span></span></span>=4*(j*t+i),f[r]=d(k,0,255),f[r+1]=d(l,0,255),f[r+2]=d(m,0,255)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn b}</span>var g,h,i=<span class="cstat-no" title="statement not covered" >a.create(b.getWidth(d),b.getHeight(d)),</span>j=<span class="cstat-no" title="statement not covered" >a.get2dContext(i);<span class="cstat-no" title="statement not covered" ></span>return j.drawImage(d,0,0),k(d),g=j.getImageData(0,0,i.width,i.height),h=j.getImageData(0,0,i.width,i.height),h=f(g,h,e),j.putImageData(h,0,0),c.canvasToBlob(i)}</span>)}</span>function <span class="fstat-no" title="function not covered" >g(</span>d){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(e,f){<span class="cstat-no" title="statement not covered" >return c.blobToImage(e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){function <span class="fstat-no" title="function not covered" >g(</span>a,b){var c,d=<span class="cstat-no" title="statement not covered" >a.data;<span class="cstat-no" title="statement not covered" ></span>for(c=0;c&lt;d.length;c+=4)<span class="cstat-no" title="statement not covered" >d[c]=b[d[c]],d[c+1]=b[d[c+1]],d[c+2]=b[d[c+2]];<span class="cstat-no" title="statement not covered" >r</span></span>eturn a}</span>var h,i,j=<span class="cstat-no" title="statement not covered" >a.create(b.getWidth(e),b.getHeight(e)),</span>l=<span class="cstat-no" title="statement not covered" >a.get2dContext(j),</span>m=<span class="cstat-no" title="statement not covered" >new Array(256);<span class="cstat-no" title="statement not covered" ></span>for(i=0;i&lt;m.length;i++)<span class="cstat-no" title="statement not covered" >m[i]=d(i,f);<span class="cstat-no" title="statement not covered" >r</span></span>eturn l.drawImage(e,0,0),k(e),h=g(l.getImageData(0,0,j.width,j.height),m),l.putImageData(h,0,0),c.canvasToBlob(j)}</span>)}</span>}</span>function <span class="fstat-no" title="function not covered" >h(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return e(b,a(d.identity(),c))}</span>}</span>function <span class="fstat-no" title="function not covered" >i(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return e(b,a)}</span>}</span>function <span class="fstat-no" title="function not covered" >j(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return f(b,a)}</span>}</span>var k=<span class="cstat-no" title="statement not covered" >c.revokeImageUrl;<span class="cstat-no" title="statement not covered" ></span>return{invert:i([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:h(d.adjustBrightness),hue:h(d.adjustHue),saturate:h(d.adjustSaturation),contrast:h(d.adjustContrast),grayscale:h(d.adjustGrayscale),sepia:h(d.adjustSepia),colorize:<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,f){<span class="cstat-no" title="statement not covered" >return e(a,d.adjustColors(d.identity(),b,c,f))}</span>,sharpen:j([0,-1,0,-1,5,-1,0,-1,0]),emboss:j([-2,-1,0,-1,1,1,0,1,2]),gamma:g(<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return 255*Math.pow(a/255,1-b)}</span>),exposure:g(<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return 255*(1-Math.exp(-(a/255)*b))}</span>),colorFilter:e,convoluteFilter:f}}</span>),g("r",["o","e","m","n"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d){function <span class="fstat-no" title="function not covered" >e(</span>a,b,c){var g=<span class="cstat-no" title="statement not covered" >d.getWidth(a),</span>h=<span class="cstat-no" title="statement not covered" >d.getHeight(a),</span>i=<span class="cstat-no" title="statement not covered" >b/g,</span>j=<span class="cstat-no" title="statement not covered" >c/h,</span>k=<span class="cstat-no" title="statement not covered" >!1;<span class="cstat-no" title="statement not covered" ></span>(.5&gt;i||i&gt;2)&amp;&amp;(i=.5&gt;i?.5:2,k=!0),(.5&gt;j||j&gt;2)&amp;&amp;(j=.5&gt;j?.5:2,k=!0);v</span>ar l=<span class="cstat-no" title="statement not covered" >f(a,i,j);<span class="cstat-no" title="statement not covered" ></span>return k?l.then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return e(a,b,c)}</span>):l}</span>function <span class="fstat-no" title="function not covered" >f(</span>b,e,f){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var g=<span class="cstat-no" title="statement not covered" >d.getWidth(b),</span>h=<span class="cstat-no" title="statement not covered" >d.getHeight(b),</span>i=<span class="cstat-no" title="statement not covered" >Math.floor(g*e),</span>j=<span class="cstat-no" title="statement not covered" >Math.floor(h*f),</span>k=<span class="cstat-no" title="statement not covered" >c.create(i,j),</span>l=<span class="cstat-no" title="statement not covered" >c.get2dContext(k);<span class="cstat-no" title="statement not covered" ></span>l.drawImage(b,0,0,g,h,0,0,i,j),a(k)}</span>)}<span class="cstat-no" title="statement not covered" ></span>return{scale:e}}</span>),g("d",["e","m","n","r"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d){function <span class="fstat-no" title="function not covered" >e(</span>d,e){<span class="cstat-no" title="statement not covered" >return a.blobToImage(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(f){var g=<span class="cstat-no" title="statement not covered" >b.create(c.getWidth(f),c.getHeight(f)),</span>h=<span class="cstat-no" title="statement not covered" >b.get2dContext(g),</span>j=<span class="cstat-no" title="statement not covered" >0,</span>k=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>return e=0&gt;e?360+e:e,90!=e&amp;&amp;270!=e||b.resize(g,g.height,g.width),90!=e&amp;&amp;180!=e||(j=g.width),270!=e&amp;&amp;180!=e||(k=g.height),h.translate(j,k),h.rotate(e*Math.PI/180),h.drawImage(f,0,0),i(f),a.canvasToBlob(g,d.type)}</span>)}</span>function <span class="fstat-no" title="function not covered" >f(</span>d,e){<span class="cstat-no" title="statement not covered" >return a.blobToImage(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(d){var f=<span class="cstat-no" title="statement not covered" >b.create(c.getWidth(d),c.getHeight(d)),</span>g=<span class="cstat-no" title="statement not covered" >b.get2dContext(f);<span class="cstat-no" title="statement not covered" ></span>return"v"==e?(g.scale(1,-1),g.drawImage(d,0,-f.height)):(g.scale(-1,1),g.drawImage(d,-f.width,0)),i(d),a.canvasToBlob(f)}</span>)}</span>function <span class="fstat-no" title="function not covered" >g(</span>c,d,e,f,g){<span class="cstat-no" title="statement not covered" >return a.blobToImage(c).then(<span class="fstat-no" title="function not covered" >fu</span>nction(c){var h=<span class="cstat-no" title="statement not covered" >b.create(f,g),</span>j=<span class="cstat-no" title="statement not covered" >b.get2dContext(h);<span class="cstat-no" title="statement not covered" ></span>return j.drawImage(c,-d,-e),i(c),a.canvasToBlob(h)}</span>)}</span>function <span class="fstat-no" title="function not covered" >h(</span>b,c,e){<span class="cstat-no" title="statement not covered" >return a.blobToImage(b).then(<span class="fstat-no" title="function not covered" >fu</span>nction(f){var g;<span class="cstat-no" title="statement not covered" >return g=d.scale(f,c,e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(c){<span class="cstat-no" title="statement not covered" >return a.canvasToBlob(c,b.type)}</span>).then(j(f))["catch"](j(f))}</span>)}</span>var i=<span class="cstat-no" title="statement not covered" >a.revokeImageUrl,</span>j=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return i(a),b}</span>}</span>;<span class="cstat-no" title="statement not covered" ></span>return{rotate:e,flip:f,crop:g,resize:h}}</span>),g("7",["c","d"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){var c=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.invert(b)}</span>,</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.sharpen(b)}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.emboss(b)}</span>,</span>f=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.gamma(b,c)}</span>,</span>g=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.exposure(b,c)}</span>,</span>h=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c,d,e){<span class="cstat-no" title="statement not covered" >return a.colorize(b,c,d,e)}</span>,</span>i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.brightness(b,c)}</span>,</span>j=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.hue(b,c)}</span>,</span>k=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.saturate(b,c)}</span>,</span>l=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.contrast(b,c)}</span>,</span>m=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.grayscale(b,c)}</span>,</span>n=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >return a.sepia(b,c)}</span>,</span>o=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,c){<span class="cstat-no" title="statement not covered" >return b.flip(a,c)}</span>,</span>p=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,c,d,e,f){<span class="cstat-no" title="statement not covered" >return b.crop(a,c,d,e,f)}</span>,</span>q=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,c,d){<span class="cstat-no" title="statement not covered" >return b.resize(a,c,d)}</span>,</span>r=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,c){<span class="cstat-no" title="statement not covered" >return b.rotate(a,c)}</span>;<span class="cstat-no" title="statement not covered" ></span>return{invert:c,sharpen:d,emboss:e,brightness:i,hue:j,saturate:k,contrast:l,grayscale:m,sepia:n,colorize:h,gamma:f,exposure:g,flip:o,crop:p,resize:q,rotate:r}}</span>),g("8",["e"],<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.blobToImage(b)}</span>,</span>c=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.imageToBlob(b)}</span>,</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.blobToDataUri(b)}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.blobToBase64(b)}</span>;<span class="cstat-no" title="statement not covered" ></span>return{blobToImage:b,imageToBlob:c,blobToDataUri:d,blobToBase64:e}}</span>),h("f",tinymce.dom.DOMUtils),h("g",tinymce.ui.Factory),h("h",tinymce.ui.Form),h("i",tinymce.ui.Container),h("s",tinymce.ui.Control),h("t",tinymce.ui.DragHelper),h("u",tinymce.geom.Rect),h("w",tinymce.dom.DomQuery),h("x",tinymce.util.Observable),h("y",tinymce.util.VK),g("v",["w","t","u","5","x","y"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d,e,f){var g=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >fu</span>nction(h,i,j,k,l){function <span class="fstat-no" title="function not covered" >m(</span>a,b){<span class="cstat-no" title="statement not covered" >return{x:b.x+a.x,y:b.y+a.y,w:b.w,h:b.h}}</span>function <span class="fstat-no" title="function not covered" >n(</span>a,b){<span class="cstat-no" title="statement not covered" >return{x:b.x-a.x,y:b.y-a.y,w:b.w,h:b.h}}</span>function <span class="fstat-no" title="function not covered" >o(</span>){<span class="cstat-no" title="statement not covered" >return n(j,h)}</span>function <span class="fstat-no" title="function not covered" >p(</span>a,b,d,e){var f,g,i,k,l;<span class="cstat-no" title="statement not covered" >f=b.x,g=b.y,i=b.w,k=b.h,f+=d*a.deltaX,g+=e*a.deltaY,i+=d*a.deltaW,k+=e*a.deltaH,20&gt;i&amp;&amp;(i=20),20&gt;k&amp;&amp;(k=20),l=h=c.clamp({x:f,y:g,w:i,h:k},j,"move"==a.name),l=n(j,l),y.fire("updateRect",{rect:l}),v(l)}</span>function <span class="fstat-no" title="function not covered" >q(</span>){function <span class="fstat-no" title="function not covered" >c(</span>a){var c;<span class="cstat-no" title="statement not covered" >return new b(D,{document:k.ownerDocument,handle:D+"-"+a.name,start:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >c=h}</span>,drag:<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >p(a,c,b.deltaX,b.deltaY)}</span>})}<span class="cstat-no" title="statement not covered" ></span>a('&lt;div id="'+D+'" class="'+C+'croprect-container" role="grid" aria-dropeffect="execute"&gt;').appendTo(k),d.each(B,<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >a("#"+D,k).append('&lt;div id="'+D+"-"+b+'"class="'+C+'croprect-block" style="display: none" data-mce-bogus="all"&gt;')}</span>),d.each(z,<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >a("#"+D,k).append('&lt;div id="'+D+"-"+b.name+'" class="'+C+"croprect-handle "+C+"croprect-handle-"+b.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+b.label+'" aria-grabbed="false"&gt;')}</span>),A=d.map(z,c),s(h),a(k).on("focusin focusout",<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >a(b.target).attr("aria-grabbed","focus"===b.type)}</span>),a(k).on("keydown",<span class="fstat-no" title="function not covered" >fu</span>nction(a){function <span class="fstat-no" title="function not covered" >b(</span>a,b,d,e,f){<span class="cstat-no" title="statement not covered" >a.stopPropagation(),a.preventDefault(),p(c,d,e,f)}</span>var c;<span class="cstat-no" title="statement not covered" >switch(d.each(z,<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.target.id==D+"-"+b.name?(c=b,!1):void 0}</span>),a.keyCode){case f.LEFT:<span class="cstat-no" title="statement not covered" >b(a,c,h,-10,0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase f.RIGHT:<span class="cstat-no" title="statement not covered" >b(a,c,h,10,0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase f.UP:<span class="cstat-no" title="statement not covered" >b(a,c,h,0,-10);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase f.DOWN:<span class="cstat-no" title="statement not covered" >b(a,c,h,0,10);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase f.ENTER:case f.SPACEBAR:<span class="cstat-no" title="statement not covered" >a.preventDefault(),l()}</span>}</span>)}</span>function <span class="fstat-no" title="function not covered" >r(</span>b){var c;<span class="cstat-no" title="statement not covered" >c=d.map(z,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return"#"+D+"-"+a.name}</span>).concat(d.map(B,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return"#"+D+"-"+a}</span>)).join(","),b?a(c,k).show():a(c,k).hide()}</span>function <span class="fstat-no" title="function not covered" >s(</span>b){function <span class="fstat-no" title="function not covered" >c(</span>b,c){<span class="cstat-no" title="statement not covered" >c.h&lt;0&amp;&amp;(c.h=0),c.w&lt;0&amp;&amp;(c.w=0),a("#"+D+"-"+b,k).css({left:c.x,top:c.y,width:c.w,height:c.h})}<span class="cstat-no" title="statement not covered" ></span>d.each(z,<span class="fstat-no" title="function not covered" >fu</span>nction(c){<span class="cstat-no" title="statement not covered" >a("#"+D+"-"+c.name,k).css({left:b.w*c.xMul+b.x,top:b.h*c.yMul+b.y})}</span>),c("top",{x:i.x,y:i.y,w:i.w,h:b.y-i.y}),c("right",{x:b.x+b.w,y:b.y,w:i.w-b.x-b.w+i.x,h:b.h}),c("bottom",{x:i.x,y:b.y+b.h,w:i.w,h:i.h-b.y-b.h+i.y}),c("left",{x:i.x,y:b.y,w:b.x-i.x,h:b.h}),c("move",b)}</span>function <span class="fstat-no" title="function not covered" >t(</span>a){<span class="cstat-no" title="statement not covered" >h=a,s(h)}</span>function <span class="fstat-no" title="function not covered" >u(</span>a){<span class="cstat-no" title="statement not covered" >i=a,s(h)}</span>function <span class="fstat-no" title="function not covered" >v(</span>a){<span class="cstat-no" title="statement not covered" >t(m(j,a))}</span>function <span class="fstat-no" title="function not covered" >w(</span>a){<span class="cstat-no" title="statement not covered" >j=a,s(h)}</span>function <span class="fstat-no" title="function not covered" >x(</span>){<span class="cstat-no" title="statement not covered" >d.each(A,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >a.destroy()}</span>),A=[]}</span>var y,z,A,B,C=<span class="cstat-no" title="statement not covered" >"mce-",</span>D=<span class="cstat-no" title="statement not covered" >C+"crid-"+g++;<span class="cstat-no" title="statement not covered" ></span>return z=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],B=["top","right","bottom","left"],q(k),y=d.extend({toggleVisibility:r,setClampRect:w,setRect:t,getInnerRect:o,setInnerRect:v,setViewPortRect:u,destroy:x},e)}</span>}</span>),g("j",["s","t","u","5","3","v"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d,e,f){function <span class="fstat-no" title="function not covered" >g(</span>a){<span class="cstat-no" title="statement not covered" >return new e(<span class="fstat-no" title="function not covered" >fu</span>nction(b){function <span class="fstat-no" title="function not covered" >c(</span>){<span class="cstat-no" title="statement not covered" >a.removeEventListener("load",c),b(a)}<span class="cstat-no" title="statement not covered" ></span>a.complete?b(a):a.addEventListener("load",c)}</span>)}<span class="cstat-no" title="statement not covered" ></span>return a.extend({Defaults:{classes:"imagepanel"},selection:<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return arguments.length?(this.state.set("rect",a),this):this.state.get("rect")}</span>,imageSize:<span class="fstat-no" title="function not covered" >fu</span>nction(){var a=<span class="cstat-no" title="statement not covered" >this.state.get("viewRect");<span class="cstat-no" title="statement not covered" ></span>return{w:a.w,h:a.h}}</span>,toggleCropRect:<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >this.state.set("cropEnabled",a)}</span>,imageSrc:<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >this,</span>d=<span class="cstat-no" title="statement not covered" >new Image;<span class="cstat-no" title="statement not covered" ></span>d.src=a,g(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(){var a,e,f=<span class="cstat-no" title="statement not covered" >b.state.get("viewRect");<span class="cstat-no" title="statement not covered" ></span>e=b.$el.find("img"),e[0]?e.replaceWith(d):b.getEl().appendChild(d),a={x:0,y:0,w:d.naturalWidth,h:d.naturalHeight},b.state.set("viewRect",a),b.state.set("rect",c.inflate(a,-20,-20)),f&amp;&amp;f.w==a.w&amp;&amp;f.h==a.h||b.zoomFit(),b.repaintImage(),b.fire("load")}</span>)}</span>,zoom:<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return arguments.length?(this.state.set("zoom",a),this):this.state.get("zoom")}</span>,postRender:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this.imageSrc(this.settings.imageSrc),this._super()}</span>,zoomFit:<span class="fstat-no" title="function not covered" >fu</span>nction(){var a,b,c,d,e,f,g,h=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>g=10,a=h.$el.find("img"),b=h.getEl().clientWidth,c=h.getEl().clientHeight,d=a[0].naturalWidth,e=a[0].naturalHeight,f=Math.min((b-g)/d,(c-g)/e),f&gt;=1&amp;&amp;(f=1),h.zoom(f)}</span>,repaintImage:<span class="fstat-no" title="function not covered" >fu</span>nction(){var a,b,c,d,e,f,g,h,i,j;<span class="cstat-no" title="statement not covered" >j=this.getEl(),h=this.zoom(),i=this.state.get("rect"),g=this.$el.find("img"),e=j.offsetWidth,f=j.offsetHeight,c=g[0].naturalWidth*h,d=g[0].naturalHeight*h,a=Math.max(0,e/2-c/2),b=Math.max(0,f/2-d/2),g.css({left:a,top:b,width:c,height:d}),this.cropRect&amp;&amp;(this.cropRect.setRect({x:i.x*h+a,y:i.y*h+b,w:i.w*h,h:i.h*h}),this.cropRect.setClampRect({x:a,y:b,w:c,h:d}),this.cropRect.setViewPortRect({x:0,y:0,w:e,h:f}))}</span>,bindStates:<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a){<span class="cstat-no" title="statement not covered" >b.cropRect=new f(a,b.state.get("viewRect"),b.state.get("viewRect"),b.getEl(),<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >b.fire("crop")}</span>),b.cropRect.on("updateRect",<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c=<span class="cstat-no" title="statement not covered" >a.rect,</span>d=<span class="cstat-no" title="statement not covered" >b.zoom();<span class="cstat-no" title="statement not covered" ></span>c={x:Math.round(c.x/d),y:Math.round(c.y/d),w:Math.round(c.w/d),h:Math.round(c.h/d)},b.state.set("rect",c)}</span>),b.on("remove",b.cropRect.destroy)}</span>var b=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>b.state.on("change:cropEnabled",<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >b.cropRect.toggleVisibility(a.value),b.repaintImage()}</span>),b.state.on("change:zoom",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >b.repaintImage()}</span>),b.state.on("change:rect",<span class="fstat-no" title="function not covered" >fu</span>nction(c){var d=<span class="cstat-no" title="statement not covered" >c.value;<span class="cstat-no" title="statement not covered" ></span>b.cropRect||a(d),b.cropRect.setRect(d)}</span>)}</span>})}</span>),g("k",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a){var b;<span class="cstat-no" title="statement not covered" >return b=f.splice(++g),f.push(a),{state:a,removed:b}}</span>function <span class="fstat-no" title="function not covered" >b(</span>){<span class="cstat-no" title="statement not covered" >return d()?f[--g]:void 0}</span>function <span class="fstat-no" title="function not covered" >c(</span>){<span class="cstat-no" title="statement not covered" >return e()?f[++g]:void 0}</span>function <span class="fstat-no" title="function not covered" >d(</span>){<span class="cstat-no" title="statement not covered" >return g&gt;0}</span>function <span class="fstat-no" title="function not covered" >e(</span>){<span class="cstat-no" title="statement not covered" >return-1!=g&amp;&amp;g&lt;f.length-1}</span>var f=<span class="cstat-no" title="statement not covered" >[],</span>g=<span class="cstat-no" title="statement not covered" >-1;<span class="cstat-no" title="statement not covered" ></span>return{data:f,add:a,undo:b,redo:c,canUndo:d,canRedo:e}}</span>}</span>),g("9",["f","5","3","g","h","i","j","7","8","k"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d,e,f,g,h,i,j){function <span class="fstat-no" title="function not covered" >k(</span>a){<span class="cstat-no" title="statement not covered" >return{blob:a,url:URL.createObjectURL(a)}}</span>function <span class="fstat-no" title="function not covered" >l(</span>a){<span class="cstat-no" title="statement not covered" >a&amp;&amp;URL.revokeObjectURL(a.url)}</span>function <span class="fstat-no" title="function not covered" >m(</span>a){<span class="cstat-no" title="statement not covered" >b.each(a,l)}</span>function <span class="fstat-no" title="function not covered" >n(</span>c,i,n){function <span class="fstat-no" title="function not covered" >o(</span>a){var b,c,d,e;<span class="cstat-no" title="statement not covered" >b=L.find("#w")[0],c=L.find("#h")[0],d=parseInt(b.value(),10),e=parseInt(c.value(),10),L.find("#constrain")[0].checked()&amp;&amp;ga&amp;&amp;ha&amp;&amp;d&amp;&amp;e&amp;&amp;("w"==a.control.settings.name?(e=Math.round(d*ia),c.value(e)):(d=Math.round(e*ja),b.value(d))),ga=d,ha=e}</span>function <span class="fstat-no" title="function not covered" >p(</span>a){<span class="cstat-no" title="statement not covered" >return Math.round(100*a)+"%"}</span>function <span class="fstat-no" title="function not covered" >q(</span>){<span class="cstat-no" title="statement not covered" >L.find("#undo").disabled(!ka.canUndo()),L.find("#redo").disabled(!ka.canRedo()),L.statusbar.find("#save").disabled(!ka.canUndo())}</span>function <span class="fstat-no" title="function not covered" >r(</span>){<span class="cstat-no" title="statement not covered" >L.find("#undo").disabled(!0),L.find("#redo").disabled(!0)}</span>function <span class="fstat-no" title="function not covered" >s(</span>a){<span class="cstat-no" title="statement not covered" >a&amp;&amp;S.imageSrc(a.url)}</span>function <span class="fstat-no" title="function not covered" >t(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){var c=<span class="cstat-no" title="statement not covered" >b.grep(fa,<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return b.settings.name!=a}</span>);<span class="cstat-no" title="statement not covered" ></span>b.each(c,<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >a.hide()}</span>),a.show(),a.focus()}</span>}</span>function <span class="fstat-no" title="function not covered" >u(</span>a){<span class="cstat-no" title="statement not covered" >O=k(a),s(O)}</span>function <span class="fstat-no" title="function not covered" >v(</span>a){<span class="cstat-no" title="statement not covered" >c=k(a),s(c),m(ka.add(c).removed),q()}</span>function <span class="fstat-no" title="function not covered" >w(</span>){var a=<span class="cstat-no" title="statement not covered" >S.selection();<span class="cstat-no" title="statement not covered" ></span>h.crop(c.blob,a.x,a.y,a.w,a.h).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >v(a),z()}</span>)}</span>function <span class="fstat-no" title="function not covered" >x(</span>a){var b=<span class="cstat-no" title="statement not covered" >[].slice.call(arguments,1);<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >fu</span>nction(){var d=<span class="cstat-no" title="statement not covered" >O||c;<span class="cstat-no" title="statement not covered" ></span>a.apply(this,[d.blob].concat(b)).then(u)}</span>}</span>function <span class="fstat-no" title="function not covered" >y(</span>a){var b=<span class="cstat-no" title="statement not covered" >[].slice.call(arguments,1);<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >a.apply(this,[c.blob].concat(b)).then(v)}</span>}</span>function <span class="fstat-no" title="function not covered" >z(</span>){<span class="cstat-no" title="statement not covered" >s(c),l(O),t(M)(),q()}</span>function <span class="fstat-no" title="function not covered" >A(</span>){<span class="cstat-no" title="statement not covered" >O&amp;&amp;(v(O.blob),z())}</span>function <span class="fstat-no" title="function not covered" >B(</span>){var a=<span class="cstat-no" title="statement not covered" >S.zoom();<span class="cstat-no" title="statement not covered" ></span>2&gt;a&amp;&amp;(a+=.1),S.zoom(a)}</span>function <span class="fstat-no" title="function not covered" >C(</span>){var a=<span class="cstat-no" title="statement not covered" >S.zoom();<span class="cstat-no" title="statement not covered" ></span>a&gt;.1&amp;&amp;(a-=.1),S.zoom(a)}</span>function <span class="fstat-no" title="function not covered" >D(</span>){<span class="cstat-no" title="statement not covered" >c=ka.undo(),s(c),q()}</span>function <span class="fstat-no" title="function not covered" >E(</span>){<span class="cstat-no" title="statement not covered" >c=ka.redo(),s(c),q()}</span>function <span class="fstat-no" title="function not covered" >F(</span>){<span class="cstat-no" title="statement not covered" >i(c.blob),L.close()}</span>function <span class="fstat-no" title="function not covered" >G(</span>a){<span class="cstat-no" title="statement not covered" >return new e({layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:a})}</span>function <span class="fstat-no" title="function not covered" >H(</span>a,b){<span class="cstat-no" title="statement not covered" >return G([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:A}]).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >r(),b(c.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >k(a);<span class="cstat-no" title="statement not covered" ></span>s(b),l(O),O=b}</span>)}</span>)}</span>function <span class="fstat-no" title="function not covered" >I(</span>a,b,d,e,f){function <span class="fstat-no" title="function not covered" >g(</span>a){<span class="cstat-no" title="statement not covered" >b(c.blob,a).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >k(a);<span class="cstat-no" title="statement not covered" ></span>s(b),l(O),O=b}</span>)}<span class="cstat-no" title="statement not covered" ></span>return G([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >g(a.value)}</span>,minValue:e,maxValue:f,value:d,previewFilter:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:A}]).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >this.find("slider").value(d),r()}</span>)}</span>function <span class="fstat-no" title="function not covered" >J(</span>a,b){function <span class="fstat-no" title="function not covered" >d(</span>){var a,d,e;<span class="cstat-no" title="statement not covered" >a=L.find("#r")[0].value(),d=L.find("#g")[0].value(),e=L.find("#b")[0].value(),b(c.blob,a,d,e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >k(a);<span class="cstat-no" title="statement not covered" ></span>s(b),l(O),O=b}</span>)}<span class="cstat-no" title="statement not covered" ></span>return G([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:d,previewFilter:p},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:d,previewFilter:p},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:d,previewFilter:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:A}]).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >L.find("#r,#g,#b").value(1),r()}</span>)}</span>function <span class="fstat-no" title="function not covered" >K(</span>a){<span class="cstat-no" title="statement not covered" >a.control.value()===!0&amp;&amp;(ia=ha/ga,ja=ga/ha)}</span>var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka=<span class="cstat-no" title="statement not covered" >new j;<span class="cstat-no" title="statement not covered" ></span>P=G([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:w}]).hide().on("show hide",<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >S.toggleCropRect("show"==a.type)}</span>).on("show",r),Q=G([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:o},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:o},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:K},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >parseInt(L.find("#w").value(),10),</span>c=<span class="cstat-no" title="statement not covered" >parseInt(L.find("#h").value(),10);<span class="cstat-no" title="statement not covered" ></span>a.preventDefault(),y(h.resize,b,c)(),z()}</span>).on("show",r),R=G([{text:"Back",onclick:z},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:x(h.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:x(h.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:x(h.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:x(h.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:A}]).hide().on("show",r),V=H("Invert",h.invert),ba=H("Sharpen",h.sharpen),ca=H("Emboss",h.emboss),W=I("Brightness",h.brightness,0,-1,1),X=I("Hue",h.hue,180,0,360),Y=I("Saturate",h.saturate,0,-1,1),Z=I("Contrast",h.contrast,0,-1,1),$=I("Grayscale",h.grayscale,0,0,1),_=I("Sepia",h.sepia,0,0,1),aa=J("Colorize",h.colorize),da=I("Gamma",h.gamma,0,-1,1),ea=I("Exposure",h.exposure,1,0,2),N=G([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:t(X)},{text:"saturate",icon:"saturate",onclick:t(Y)},{text:"sepia",icon:"sepia",onclick:t(_)},{text:"emboss",icon:"emboss",onclick:t(ca)},{text:"exposure",icon:"exposure",onclick:t(ea)},{type:"spacer",flex:1}]).hide(),M=G([{tooltip:"Crop",icon:"crop",onclick:t(P)},{tooltip:"Resize",icon:"resize2",onclick:t(Q)},{tooltip:"Orientation",icon:"orientation",onclick:t(R)},{tooltip:"Brightness",icon:"sun",onclick:t(W)},{tooltip:"Sharpen",icon:"sharpen",onclick:t(ba)},{tooltip:"Contrast",icon:"contrast",onclick:t(Z)},{tooltip:"Color levels",icon:"drop",onclick:t(aa)},{tooltip:"Gamma",icon:"gamma",onclick:t(da)},{tooltip:"Invert",icon:"invert",onclick:t(V)}]),S=new g({flex:1,imageSrc:c.url}),T=new f({layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:D},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:E},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:B},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:C}]}),U=new f({type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[T,S]}),fa=[M,P,Q,R,N,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea],L=d.create("window",{layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(a.DOM.getViewPort().w,800),minHeight:Math.min(a.DOM.getViewPort().h,650),title:"Edit image",items:fa.concat([U]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:F},{text:"Cancel",onclick:"close"}]}),L.renderTo(document.body).reflow(),L.on("close",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >n(),m(ka.data),ka=null,O=null}</span>),ka.add(c),q(),S.on("load",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >ga=S.imageSize().w,ha=S.imageSize().h,ia=ha/ga,ja=ga/ha,L.find("#w").value(ga),L.find("#h").value(ha)}</span>),S.on("crop",w)}</span>function <span class="fstat-no" title="function not covered" >o(</span>a){<span class="cstat-no" title="statement not covered" >return new c(<span class="fstat-no" title="function not covered" >fu</span>nction(b,c){<span class="cstat-no" title="statement not covered" >n(k(a),b,c)}</span>)}<span class="cstat-no" title="statement not covered" ></span>return{edit:o}}</span>),g("a",[],<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >a(</span>a){function <span class="fstat-no" title="function not covered" >b(</span>a){<span class="cstat-no" title="statement not covered" >return/^[0-9\.]+px$/.test(a)}</span>var c,d;<span class="cstat-no" title="statement not covered" >return c=a.style.width,d=a.style.height,c||d?b(c)&amp;&amp;b(d)?{w:parseInt(c,10),h:parseInt(d,10)}:null:(c=a.width,d=a.height,c&amp;&amp;d?{w:parseInt(c,10),h:parseInt(d,10)}:null)}</span>function <span class="fstat-no" title="function not covered" >b(</span>a,b){var c,d;<span class="cstat-no" title="statement not covered" >b&amp;&amp;(c=a.style.width,d=a.style.height,(c||d)&amp;&amp;(a.style.width=b.w+"px",a.style.height=b.h+"px",a.removeAttribute("data-mce-style")),c=a.width,d=a.height,(c||d)&amp;&amp;(a.setAttribute("width",b.w),a.setAttribute("height",b.h)))}</span>function <span class="fstat-no" title="function not covered" >c(</span>a){<span class="cstat-no" title="statement not covered" >return{w:a.naturalWidth,h:a.naturalHeight}}<span class="cstat-no" title="statement not covered" ></span>return{getImageSize:a,setImageSize:b,getNaturalImageSize:c}}</span>),g("l",["3","5"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){var c=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return null!==a&amp;&amp;void 0!==a}</span>,</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){var d;<span class="cstat-no" title="statement not covered" >return d=b.reduce(<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return c(a)?a[b]:void 0}</span>,a),c(d)?d:null}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(c,d){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var e;<span class="cstat-no" title="statement not covered" >e=new XMLHttpRequest,e.onreadystatechange=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >4===e.readyState&amp;&amp;a({status:e.status,blob:this.response})}</span>,e.open("GET",c,!0),b.each(d,<span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >e.setRequestHeader(b,a)}</span>),e.responseType="blob",e.send()}</span>)}</span>,</span>f=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return new a(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var c=<span class="cstat-no" title="statement not covered" >new FileReader;<span class="cstat-no" title="statement not covered" ></span>c.onload=<span class="fstat-no" title="function not covered" >fu</span>nction(b){var c=<span class="cstat-no" title="statement not covered" >b.target;<span class="cstat-no" title="statement not covered" ></span>a(c.result)}</span>,c.readAsText(b)}</span>)}</span>,</span>g=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){var b;<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >b=JSON.parse(a)}</span>catch(c){}<span class="cstat-no" title="statement not covered" >r</span>eturn b}</span>;<span class="cstat-no" title="statement not covered" ></span>return{traverse:d,readBlob:f,requestUrlAsBlob:e,parseJson:g}}</span>),g("b",["3","5","l"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c){function <span class="fstat-no" title="function not covered" >d(</span>b){<span class="cstat-no" title="statement not covered" >return c.requestUrlAsBlob(b,{}).then(<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return b.status&gt;=400?f(b.status):a.resolve(b.blob)}</span>)}</span>var e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return 400===a||403===a||500===a}</span>,</span>f=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return a.reject("ImageProxy HTTP error: "+b)}</span>,</span>g=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >a.reject("ImageProxy Service error: "+b)}</span>,</span>h=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return c.readBlob(b).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){var b=<span class="cstat-no" title="statement not covered" >c.parseJson(a),</span>d=<span class="cstat-no" title="statement not covered" >c.traverse(b,["error","type"]);<span class="cstat-no" title="statement not covered" ></span>return g(d?d:"Invalid JSON")}</span>)}</span>,</span>i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return e(a)?h(a,b):f(a)}</span>,</span>j=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(b,d){<span class="cstat-no" title="statement not covered" >return c.requestUrlAsBlob(b,{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":d}).then(<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return b.status&gt;=400?i(b.status,b.blob):a.resolve(b.blob)}</span>)}</span>,</span>k=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a,b){<span class="cstat-no" title="statement not covered" >return b?j(a,b):d(a)}</span>;<span class="cstat-no" title="statement not covered" ></span>return{getUrl:k}}</span>),g("0",["1","2","3","4","5","6","7","8","9","a","b"],<span class="fstat-no" title="function not covered" >fu</span>nction(a,b,c,d,e,f,g,h,i,j,k){var l=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){function <span class="fstat-no" title="function not covered" >l(</span>b){<span class="cstat-no" title="statement not covered" >a.notificationManager.open({text:b,type:"error"})}</span>function <span class="fstat-no" title="function not covered" >m(</span>){<span class="cstat-no" title="statement not covered" >return a.selection.getNode()}</span>function <span class="fstat-no" title="function not covered" >n(</span>){<span class="cstat-no" title="statement not covered" >return"imagetools"+G++}</span>function <span class="fstat-no" title="function not covered" >o(</span>b){var c=<span class="cstat-no" title="statement not covered" >b.src;<span class="cstat-no" title="statement not covered" ></span>return 0===c.indexOf("data:")||0===c.indexOf("blob:")||new d(c).host===a.documentBaseURI.host}</span>function <span class="fstat-no" title="function not covered" >p(</span>b){<span class="cstat-no" title="statement not covered" >return-1!==e.inArray(a.settings.imagetools_cors_hosts,new d(b.src).host)}</span>function <span class="fstat-no" title="function not covered" >q(</span>){<span class="cstat-no" title="statement not covered" >return a.settings.api_key||a.settings.imagetools_api_key}</span>function <span class="fstat-no" title="function not covered" >r(</span>b){var c,d=<span class="cstat-no" title="statement not covered" >b.src;<span class="cstat-no" title="statement not covered" ></span>return p(b)?k.getUrl(b.src,null):o(b)?h.imageToBlob(b):(d=a.settings.imagetools_proxy,d+=(-1===d.indexOf("?")?"?":"&amp;")+"url="+encodeURIComponent(b.src),c=q(),k.getUrl(d,c))}</span>function <span class="fstat-no" title="function not covered" >s(</span>){var b;<span class="cstat-no" title="statement not covered" >return b=a.editorUpload.blobCache.getByUri(m().src),b?b.blob():r(m())}</span>function <span class="fstat-no" title="function not covered" >t(</span>){<span class="cstat-no" title="statement not covered" >E=f.setEditorTimeout(a,<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >a.editorUpload.uploadImagesAuto()}</span>,3e4)}</span>function <span class="fstat-no" title="function not covered" >u(</span>){<span class="cstat-no" title="statement not covered" >clearTimeout(E)}</span>function <span class="fstat-no" title="function not covered" >v(</span>b,c){<span class="cstat-no" title="statement not covered" >return h.blobToDataUri(b).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){var f,g,h,i,j;<span class="cstat-no" title="statement not covered" >return j=m(),f=n(),h=a.editorUpload.blobCache,g=d.parseDataUri(e).data,i=h.create(f,b,g),h.add(i),a.undoManager.transact(<span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >b(</span>){<span class="cstat-no" title="statement not covered" >a.$(j).off("load",b),a.nodeChanged(),c?a.editorUpload.uploadImagesAuto():(u(),t())}<span class="cstat-no" title="statement not covered" ></span>a.$(j).on("load",b),a.$(j).attr({src:i.blobUri()}).removeAttr("data-mce-src")}</span>),i}</span>)}</span>function <span class="fstat-no" title="function not covered" >w(</span>b){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return a._scanForImages().then(s).then(b).then(v,l)}</span>}</span>function <span class="fstat-no" title="function not covered" >x(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return w(<span class="fstat-no" title="function not covered" >fu</span>nction(b){var c=<span class="cstat-no" title="statement not covered" >j.getImageSize(m());<span class="cstat-no" title="statement not covered" ></span>return c&amp;&amp;j.setImageSize(m(),{w:c.h,h:c.w}),g.rotate(b,a)}</span>)()}</span>}</span>function <span class="fstat-no" title="function not covered" >y(</span>a){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return w(<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >return g.flip(b,a)}</span>)()}</span>}</span>function <span class="fstat-no" title="function not covered" >z(</span>){var a=<span class="cstat-no" title="statement not covered" >m(),</span>b=<span class="cstat-no" title="statement not covered" >j.getNaturalImageSize(a),</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(d){<span class="cstat-no" title="statement not covered" >return new c(<span class="fstat-no" title="function not covered" >fu</span>nction(c){<span class="cstat-no" title="statement not covered" >h.blobToImage(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(e){var f=<span class="cstat-no" title="statement not covered" >j.getNaturalImageSize(e);<span class="cstat-no" title="statement not covered" ></span>b.w==f.w&amp;&amp;b.h==f.h||j.getImageSize(a)&amp;&amp;j.setImageSize(a,f),URL.revokeObjectURL(e.src),c(d)}</span>)}</span>)}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >return i.edit(a).then(d).then(<span class="fstat-no" title="function not covered" >fu</span>nction(a){<span class="cstat-no" title="statement not covered" >v(a,!0)}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(){})}</span>;<span class="cstat-no" title="statement not covered" ></span>a&amp;&amp;r(a).then(e,l)}</span>function <span class="fstat-no" title="function not covered" >A(</span>){<span class="cstat-no" title="statement not covered" >a.addButton("rotateleft",{title:"Rotate counterclockwise",onclick:x(-90)}),a.addButton("rotateright",{title:"Rotate clockwise",onclick:x(90)}),a.addButton("flipv",{title:"Flip vertically",onclick:y("v")}),a.addButton("fliph",{title:"Flip horizontally",onclick:y("h")}),a.addButton("editimage",{title:"Edit image",onclick:z}),a.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}</span>function <span class="fstat-no" title="function not covered" >B(</span>){<span class="cstat-no" title="statement not covered" >a.on("NodeChange",<span class="fstat-no" title="function not covered" >fu</span>nction(b){<span class="cstat-no" title="statement not covered" >F&amp;&amp;F.src!=b.element.src&amp;&amp;(u(),a.editorUpload.uploadImagesAuto(),F=void 0),C(b.element)&amp;&amp;(F=b.element)}</span>)}</span>function <span class="fstat-no" title="function not covered" >C(</span>b){var c=<span class="cstat-no" title="statement not covered" >a.dom.is(b,"img:not([data-mce-object],[data-mce-placeholder])");<span class="cstat-no" title="statement not covered" ></span>return c&amp;&amp;(o(b)||p(b)||a.settings.imagetools_proxy)}</span>function <span class="fstat-no" title="function not covered" >D(</span>){var b=<span class="cstat-no" title="statement not covered" >a.settings.imagetools_toolbar;<span class="cstat-no" title="statement not covered" ></span>b||(b="rotateleft rotateright | flipv fliph | crop editimage imageoptions"),a.addContextToolbar(C,b)}</span>var E,F,G=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>b.fileApi&amp;&amp;(A(),D(),B(),a.addCommand("mceEditImage",z))}</span>;<span class="cstat-no" title="statement not covered" ></span>return a.add("imagetools",l),<span class="fstat-no" title="function not covered" >fu</span>nction(){}}</span>),d("0")()}</span>();</span></pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2024-04-17T07:12:00.429Z
            </div>
        <script src="../../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../../sorter.js"></script>
        <script src="../../../../../../../block-navigation.js"></script>
    </body>
</html>
    